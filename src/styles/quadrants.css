.quadrant,
.sub-quadrant {
  position: absolute;
  width: 50%;
  height: 50%;
  min-height: 50vh; /* Safety net: prevents gap during container height transition */
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 24px;
  text-transform: uppercase;
  letter-spacing: 2px;
  transition: all var(--duration-main) var(--timing-main);
  box-sizing: border-box;
  cursor: pointer;
  overflow: hidden;
}

.quadrant img {
  max-width: 80%;
  max-height: 80%;
  object-fit: contain;
}

.quadrant .static-img {
  position: absolute;
}

.quadrant .hover-img {
  position: absolute;
  visibility: hidden;
}

.quadrant:hover .static-img {
  visibility: hidden;
}

.quadrant:hover .hover-img {
  visibility: visible;
}

.quadrant.selected {
  cursor: default;
}

/* Color Logic */
.about,
.clients,
.white-sub {
  background: var(--color-menu-white);
  color: black;
}

.services,
.portfolio,
.blue-sub {
  background: var(--color-navy);
  color: var(--color-content-white);
}

/* Initial Grid Positions */
.about {
  top: 0;
  left: 0;
}

.services {
  top: 0;
  left: 50%;
}

.portfolio {
  top: 50%;
  left: 0;
}

.clients {
  top: 50%;
  left: 50%;
}

/* Vanish to Corners */
.stateExpanding .about:not(.selected) {
  width: 0;
  height: 0;
  top: 0;
  left: 0;
  opacity: 0;
}

.stateExpanding .services:not(.selected) {
  width: 0;
  height: 0;
  top: 0;
  left: 100%;
  opacity: 0;
}

.stateExpanding .portfolio:not(.selected) {
  width: 0;
  height: 0;
  top: 100%;
  left: 0;
  opacity: 0;
}

.stateExpanding .clients:not(.selected) {
  width: 0;
  height: 0;
  top: 100%;
  left: 100%;
  opacity: 0;
}

/* Selected Quadrant Stays Top-Left */
.quadrant.selected {
  width: 50% !important;
  height: 50dvh !important;
  top: 0 !important;
  left: 0 !important;
  z-index: var(--z-selected) !important;
}

/* Sub-Quadrant Positioning */
.sub-quadrant {
  left: 100%;
  top: 0;
  z-index: var(--z-sub-quadrant);
  font-size: 1.5vw;
  padding: 40px;
  text-align: center;
  cursor: default;
  pointer-events: none;
}

/* Sub-Quadrant Color Logic - White quadrants show blue sub */
.aboutSelected .blue-sub,
.clientsSelected .blue-sub {
  left: 50% !important;
  top: 0 !important;
  width: 50% !important;
  height: 50vh !important;
  display: flex !important;
  z-index: 50 !important;
}

/* Blue quadrants show white sub */
.servicesSelected .white-sub,
.portfolioSelected .white-sub {
  left: 50% !important;
  top: 0 !important;
  width: 50% !important;
  height: 50vh !important;
  display: flex !important;
  z-index: 50 !important;
}

/* ========================================
   RESIZE PROTECTION
   ======================================== */

/* Disable transitions during resize to prevent glitches */
.container.no-transition .quadrant,
.container.no-transition .sub-quadrant {
  transition: none !important;
}

/* ========================================
   TABLET/SMALLER SCREENS (max-width: 1024px)
   ======================================== */

@media (max-width: 1100px) {
  /* Increase sub-quadrant text size for better readability */
  .sub-quadrant {
    font-size: 1.8vw;
  }
}

/* ========================================
   MOBILE STACKING (max-width: 768px)
   ======================================== */

@media (max-width: 768px) {
  /* EXPANDED STATE: Selected quad takes 40% of viewport */
  .quadrant.selected {
    width: 100% !important;
    /* Use JS-calculated --quad40 variable for consistent cross-browser heights, fallback to svh */
    height: var(--quad40, 40svh) !important;
    top: 0 !important;
    left: 0 !important;
  }

  /* Sub-quadrant stacks below selected quad */
  .aboutSelected .blue-sub,
  .clientsSelected .blue-sub,
  .servicesSelected .white-sub,
  .portfolioSelected .white-sub {
    left: 0 !important;
    /* Use JS-calculated --quad40 variable for consistent cross-browser heights, fallback to svh */
    top: var(--quad40, 40svh) !important;
    width: 100% !important;
    height: var(--quad40, 40svh) !important;
  }

  /* Adjust sub-quadrant text size */
  .sub-quadrant {
    font-size: 3vw;
    padding: 20px;
  }
}
